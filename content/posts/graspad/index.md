---
title: "graspad - iPad用の握れるキーボード"
date: "2020-10-15T21:44:57+09:00"
tags: [ "自作キーボード", "3Dプリンタ", "iPad" ]
draft: true
---


3Dプリンタを買った話をしたが、3Dプリンタで作りたかったものがこれ。
iPadケースの背面にキーボードがくっついていて、iPadをNintendo Switchのような形で握ったままキーボードを打てる。

![graspadを手で握って保持しているとき](https://blob.yammer.jp/graspad-grasped.jpg)

左右の2パーツから成っていて、iPadの左右から差し込み、2つをつなぐ配線とiPadのType-Cをつなぐことで使える。

![graspadの内側に配線がある様子](https://blob.yammer.jp/graspad-with-cables.jpg)

キー数は42キーで、3x6のキーが背面の左右に、親指で押す用の側面のキーが3つずつ左右にある。

![graspadを上から俯瞰したとき](https://blob.yammer.jp/graspad-overlooking.jpg)

## 着想

iPadに物理キーボードを使いたいと思っていたのだが、普通のキーボードを繋ぐだけでは安定した机の上でしか使えないし、それならMacbookで代用できてしまう。

電車の中やベッドやソファでゴロゴロしながら物理キーボードが使えたらいいなと思って、iPadを横持ちで握ったままキー入力が出来ることを目指して作った。

制作に当たって以下のような製品を参考にした。

- Nintendo Switch
- VAIO Type U
- [T-BLADE](https://internetcom.jp/201361/t-blade-back-typing-keyboard-for-ipad?utm_source=pocket_mylist)
- [Yogitype](https://m.youtube.com/watch?v=8H_bXomQsm4&utm_source=pocket_mylist)
- [LAVIE MINI](https://news.mynavi.jp/article/20210107-1625679/?utm_source=pocket_mylist)

最初は思いつきだったけれど3Dプリンタが案外やすく買えることに気づいてしまってからは割と勢いで完成までこぎつけた。

## 設計

### キー配列

キー数を42キーにするのは結構初期の段階で決めていた。普段使っている配列が40%程度で、レイヤーを使えば十分に実用に耐えうる、今の私の最低限のキー数である。これより少ないのは未知の領域。

適当な図を書きながらこんな感じでは？と構想をふくらませる。この時点で概ねの形は決まっていた。

![graspadの構想とスケッチ](https://blob.yammer.jp/graspad-concept.png)

iPadの大きさは176mm x 248mm、横持ちをするとすると高さ方向に176mm以下に抑えなければならない。

176mmの方向に並べるキー数を、下から6(裏面)+3(側面)-1(裏面上段と側面下段を重ねる)とすると、キーピッチ20mmでは160mmで結構ギリギリである。iPadの側面には電源ボタン、上部にはカメラなどがあり、Apple Pencilを上部に配置することにするとこれでは高さが足りない。

挟ピッチの16mmとすると16mm*8=128mmとなってだいぶ余裕が出るのでよい。　

### PCB

挟ピッチで格子配列となるとmcsp lpというキーボードを見つけて当初はこれを改造するか基板を作るか、基盤無しで3Dプリンタで作った筐体にマウントするかなどを考えていたが、途中でte96という素晴らしいキットに出会ってこれに決めた。

te96は分割後に再構成できる自作キーボード用のPCBで、row-staggeredやcolumn-staggered、格子配列などの形に自由に組み立てられる。キーボードのピッチ幅も1方向は16mm-20mmの可変で、組み立て時に自分で決めることができる。

![te96の基板](https://blob.yammer.jp/graspad-te96.jpg)

### ケースとキーボード筐体の一体化

当初は市販品のiPadケースに3Dプリンタで作った筐体を貼り付けることを想定していたが、一緒に印刷したほうが楽なのでは？ということでそのように方針転換した。

これは良かったかと言われると微妙だった。

筐体を構成する樹脂のPLAは硬くしなりづらい素材で、iPadのケースにしようとしても、少し出っ張らせてパチっとはめ込むような構造にし難い。

このおかげで左右分離式でiPadに差し込むように固定する方法が決定し、あわせて配線をコネクタで繋ぐことを検討する必要が出てきてしまった。(コネクタを介する配線を減らすために、Pro Microも2台必要になってしまった。なおType-Cケーブルで繋ぐために片方はPro Micro互換のElite-Cを、もう一方は安価なPro Microを用いている。)

もっといえば、iPadとの大きさの調整がシビアで試作を繰り返す羽目になった。

試作には上部ないし下部のみで30時間くらい印刷にかかるので結構面倒だった。

### iPadの大きさとiPadケースのモデリング

hoge

## 組み立て

### 使用部品

#### 3Dプリンタ関係

- (Anycubic Mega S)
- フィラメント PLA 黒 1.75mm 1kg

#### キーボード組立部品

- te96 x2
- Kailh Choc 赤軸 x42
    
    なるべく薄くするためにKailh Chocを選んだ。赤軸のキースイッチが手元に丁度2個余っていたので40個買ってピッタリ使った。
    
- mcsp lp向け挟ピッチキーキャップ x42
    
    Kailh Choc用の16mmピッチで使えるキーキャップは他に選択肢がなかった。DMM.makeで3Dプリンタによって印刷されたものが届いた。相当力を入れないとキースイッチに刺さらないので、同じものを購入される方は注意されたい。
    
- ジャンパケーブル
    
    左右の筐体間をつなぐコネクタとして使っている
    
- はんだ
    
    0.3mmなどの細いものを用意しておくとやりやすい
    
- 導線
    
    PCB間 (親指部分との配線)や、PCB内でも各columnとPro Micro間を導線で配線する必要がある
    
- スズメッキ線
    
    te96のrow同士の配線に使った
    
- Pro Micro、Elite-C
    
    左右の筐体に一つずつ使うが、iPadとの接続はUSB Type-Cで行うので、後述するケーブルが使えるように片方はPro Micro互換のElite-Cを使うこととした
    
- UGREEN USB Type-Cケーブル
    
    片方がL字になっていて、長さが50cmで長すぎないType-C to Type-Cのケーブル。
    

### 組み上げ

キーボードはマニュアルにあるような感じで組み立てていく。キーピッチは16mmになるように、最狭間隔で固定する。

![te96のPCBを切断して分割した状態](https://blob.yammer.jp/graspad-te96-devided.jpg)

te96の基盤を切り刻んで、ピンヘッダと接合部品を用いて繋げるのだが、そのときに意図しないショートに注意。特に16mmピッチにする場合は、外側に17-19mmピッチ用の穴があり、誤ってこれが基盤の近くにあるCherry  MXの穴とぶつかるとrowとcolumnが導通してしまいキーボードとして機能しなくなる。 (やってしまってむりやり分解した。)

Cherry MXの穴は接合する基盤の片側にしかないので、ショートしないように接合部品を配置すべき。

![te96の基盤を連結した状態](https://blob.yammer.jp/graspad-te96-join.jpg)

ピンヘッダを差し込んで基盤を接合するときは、裏にマスキングテープを貼って出っ張らないようにするといい。

![te96で基盤連結用のピンヘッダをはんだづけするときは、裏側をマスキングテープで止めておくとピンの長さをぴったりにできる](https://blob.yammer.jp/graspad-te96-with-masking-tape.jpg)

基盤同士が接合できてテスターで導通を確認したら、ダイオードとキースイッチ、PCB内の配線、Pro MicroとElite-C、PCB間の配線をはんだ付けしていく。

![te96にProMicroを組付けた状態](https://blob.yammer.jp/graspad-te96-with-promicro.jpg)

![キースイッチを組み付けた状態](https://blob.yammer.jp/graspad-assemble-keyswitch.jpg)

キーキャップをはめてキーマップを書き込み動作確認する

![キーボードの配線を済ませて動作確認する状態](https://blob.yammer.jp/graspad-assemble-only-keyboard.jpg)

最後に筐体に組み付けて完成。

PCBの筐体への固定は、PCBにある2.15mmの穴に筐体の突起を差し込む方式とした。(試作を繰り返す中で思いついた) 複数の基板を接合する際に間隔が開いて寸法がずれて差し込めなくなるのを防ぐために、筐体の一部を切り取ったような治具を印刷し、この上で組立を行っていた。

親指のキー部分は、キーボードを差し込むための筐体側の突起のある台座を別部品として印刷して、筐体本体に差し込むこととした。印刷方向から突起を水平方向に伸ばすのが厳しいためである。

![3Dプリンタで印刷した筐体](https://blob.yammer.jp/graspad-printed.jpg)

ちなみに各パーツの固定が甘かったので瞬間接着剤を流したら分解できなくなった。接触不良などが発生しても直せなくて困る。

![連結前のPCBを試作した筐体に組み付けてみる](https://blob.yammer.jp/graspad-assembe-to-prototype.jpg)

### キーマップの書き込み

hoge

## 使い心地

動作するところまでは持っていけた。

3Dプリンタの精度が案外高くて、筐体もそれなりの形で作れたように思う。

椅子の上で使ったりベッドの上で寝転がって使ったりすることもできる。しかしながらタイピングの速度はびっくりするくらい遅い。慣れの問題だろうと思っていたがほう

手の筋肉の弛緩を見誤ったのがまずかった

## 改善点

te96組立時にショートさせない

分解可能性

コネクタの改善/廃止

キーボードを背面ではなく側面に配置する　(折りたたみ？)

CherryMX互換キーキャップ

<!--

---

3Dプリンタの印刷可能サイズの都合上、もともと筐体を2つに分けて印刷するのは決まっていた。　当初は1台のPro  Microに収めようと思っていた (te96では1台で48keyまで対応しているので可能)のだが、試作をしている過程で、印刷に使うPLA樹脂は硬く普通のケースのようにiPadをパチっとはめ込む構造にするのは難しいことがわかった。そこで樹脂がしならなくてもよいように、左右分割式で横から差し込むことにした。配線も左右をコネクタでつなぐとしたことで、11本ほどの配線をコネクタ経由で繋ぐのは大変なので、左右をまたぐ配線を減らすために通常の左右分割型自作キーボードと同様の2台のPro Microを4本の配線で繋いで通信する形式とした。

---

試作を繰り返す中で加えた修正に、キーボードの固定方法がある。te96には直径2.15mmの穴が複数箇所に開いており、この大きさに合わせた特記を筐体に用意して差し込むことで固定することとした (はめ込むだけで済むようにしたかったが、実際にはゆるゆるだったので瞬間接着剤で固定した。分解できなくなって悲しいが。)

-->
